<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mega Spam Classifier</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }

    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .email-card {
      transition: all 0.3s ease;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .email-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .spam-indicator {
      transition: width 0.5s ease;
    }

    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body class="antialiased">
  <div class="min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-12">
      <div class="container mx-auto px-4 text-center">
        <h1 class="text-3xl font-bold">Mega Spam Classifier</h1>
        <p class="text-xl mt-4">Advanced AI-powered email spam detection</p>
      </div>
    </header>

    <!-- Main Section -->
    <main class="container mx-auto px-4 py-12">
      <!-- Try It Out -->
      <section class="mb-16">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-gray-800 mb-4">Try It Out</h2>
          <p class="text-gray-600 max-w-2xl mx-auto">Paste your email content and click the button to classify it.</p>
        </div>

        <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6">
          <label for="email-text" class="block text-gray-700 font-medium mb-2">Email Content</label>
          <textarea id="email-text" rows="6" class="w-full px-4 py-3 rounded-lg border border-gray-300 mb-6 focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Paste email text here..."></textarea>

          <div class="text-center">
            <button id="classify-btn" class="gradient-bg text-white font-bold py-3 px-8 rounded-full hover:opacity-90 transition duration-300 transform hover:scale-105 pulse">
              <i class="fas fa-robot mr-2"></i> Classify Email
            </button>
          </div>

          <div id="result-section" class="hidden mt-10">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">Results</h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="email-card bg-white rounded-lg p-6">
                <h4 class="text-lg font-semibold mb-2">Naive Bayes</h4>
                <div class="mb-2 flex justify-between text-sm text-gray-600">
                  <span>Spam Probability</span>
                  <span id="nb-prob">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                  <div id="nb-bar" class="spam-indicator bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
                <div id="nb-result" class="text-center py-2 px-4 rounded-lg font-medium"></div>
              </div>

              <div class="email-card bg-white rounded-lg p-6">
                <h4 class="text-lg font-semibold mb-2">Support Vector Machine</h4>
                <div class="mb-2 flex justify-between text-sm text-gray-600">
                  <span>Confidence Level</span>
                  <span id="svm-prob">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                  <div id="svm-bar" class="spam-indicator bg-purple-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
                <div id="svm-result" class="text-center py-2 px-4 rounded-lg font-medium"></div>
              </div>
            </div>

            <div class="bg-gray-50 rounded-lg p-4 mt-6">
              <h4 class="font-semibold mb-2">Detected Keywords</h4>
              <div id="keywords" class="flex flex-wrap gap-2"></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="gradient-bg text-white py-6 text-center">
      <p>Email Spam Classifier © 2025 | AI-Based Email Safety</p>
    </footer>
  </div>

  <script>
    const spamKeywords = ['win', 'winner', 'won', 'prize', 'claim', 'free', 'gift', 'card', 'click', 'here', 'urgent', 'money', 'cash', 'bonus', 'offer', 'limited', 'congratulations', 'deal', 'discount', 'guaranteed', 'million', 'dollars', 'credit', 'loan', 'viagra', 'medicine'];
    const professionalKeywords = ['meeting', 'document', 'project', 'team', 'follow', 'discuss', 'agenda', 'report', 'presentation', 'client', 'business', 'schedule', 'minutes', 'action', 'items', 'deadline'];

    const emailTextarea = document.getElementById('email-text');
    const classifyBtn = document.getElementById('classify-btn');
    const resultSection = document.getElementById('result-section');
    const nbResult = document.getElementById('nb-result');
    const svmResult = document.getElementById('svm-result');
    const nbBar = document.getElementById('nb-bar');
    const svmBar = document.getElementById('svm-bar');
    const nbProb = document.getElementById('nb-prob');
    const svmProb = document.getElementById('svm-prob');
    const keywordsContainer = document.getElementById('keywords');

    classifyBtn.addEventListener('click', classifyEmail);

    function classifyEmail() {
      const email = emailTextarea.value.trim();
      if (!email) return alert('Please enter an email message to classify.');

      resultSection.classList.remove('hidden');
      classifyBtn.innerHTML = '<i class="fas fa-cog fa-spin mr-2"></i> Analyzing...';
      classifyBtn.classList.add('opacity-75');
      classifyBtn.disabled = true;

      setTimeout(() => {
        classifyBtn.innerHTML = '<i class="fas fa-robot mr-2"></i> Classify Email';
        classifyBtn.classList.remove('opacity-75');
        classifyBtn.disabled = false;

        const emailLower = email.toLowerCase();
        const nbScore = calculateSpamScore(emailLower);
        const nbPercentage = Math.min(100, Math.round(nbScore * 100));
        const svmScore = calculateSVMScore(emailLower);
        const svmPercentage = Math.min(100, Math.round(svmScore * 100));

        updateResults(nbPercentage, svmPercentage, emailLower);
        highlightKeywords(emailLower);
      }, 1200);
    }

    function calculateSpamScore(email) {
      const words = email.split(/\s+/);
      let spamCount = 0;
      words.forEach(word => {
        if (spamKeywords.includes(word)) spamCount++;
      });
      const ratio = spamCount / words.length;
      return Math.min(1, ratio * 2 + Math.random() * 0.2);
    }

    function calculateSVMScore(email) {
      const words = email.split(/\s+/);
      let spamCount = 0;
      let proCount = 0;
      words.forEach(word => {
        if (spamKeywords.includes(word)) spamCount++;
        if (professionalKeywords.includes(word)) proCount++;
      });
      const score = (spamCount + 1) / (proCount + 2);
      return Math.min(1, score / 2);
    }

    function updateResults(nbPercent, svmPercent, email) {
      nbBar.style.width = `${nbPercent}%`;
      nbProb.textContent = `${nbPercent}%`;
      svmBar.style.width = `${svmPercent}%`;
      svmProb.textContent = `${svmPercent}%`;

      nbResult.textContent = nbPercent > 50 ? "⚠️ Spam" : "✅ Legitimate";
      nbResult.className = `text-white ${nbPercent > 50 ? 'bg-red-500' : 'bg-green-500'} rounded-lg`;

      svmResult.textContent = svmPercent > 50 ? "⚠️ Spam" : "✅ Legitimate";
      svmResult.className = `text-white ${svmPercent > 50 ? 'bg-red-500' : 'bg-green-500'} rounded-lg`;

      const resultMsg = (nbPercent + svmPercent) / 2 > 50
        ? "🚨 This is likely a Spam email."
        : "✅ This appears to be a Legitimate email.";

      const existing = document.querySelector('#result-section .overall-msg');
      if (existing) existing.remove();

      const msg = document.createElement('div');
      msg.className = "overall-msg mt-4 text-center text-lg font-semibold";
      msg.innerText = resultMsg;
      resultSection.appendChild(msg);
    }

    function highlightKeywords(email) {
      keywordsContainer.innerHTML = '';
      const words = [...new Set(email.split(/\s+/))];
      words.forEach(word => {
        if (spamKeywords.includes(word) || professionalKeywords.includes(word)) {
          const span = document.createElement('span');
          span.textContent = word;
          span.className = `px-3 py-1 rounded-full text-sm font-medium text-white ${spamKeywords.includes(word) ? 'bg-red-500' : 'bg-green-500'}`;
          keywordsContainer.appendChild(span);
        }
      });
    }
  </script>
</body>
</html>
